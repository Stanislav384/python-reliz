import pygame
import random

pygame.init()

pygame.display.set_caption("ĞŸĞµÑ€ÑˆĞ° Ğ“Ñ€Ğ°")
WIDTH, HEIGHT = 1280, 720
screen = pygame.display.set_mode((WIDTH, HEIGHT))

# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ„Ğ¾Ğ½Ñ–Ğ² Ğ´Ğ»Ñ Ñ€Ñ–Ğ²Ğ½Ñ–Ğ²
backgrounds = [
    pygame.transform.scale(pygame.image.load("background1.png"), (WIDTH, HEIGHT)),
    pygame.transform.scale(pygame.image.load("background2.jpg"), (WIDTH, HEIGHT)),
    pygame.transform.scale(pygame.image.load("background3.png"), (WIDTH, HEIGHT)),
]

current_level = 0  # ĞĞ¾Ğ¼ĞµÑ€ Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ñ–Ğ²Ğ½Ñ

# ğŸ”¸ğŸ”¸ğŸ”¸ ĞĞĞ’Ğ•: Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ– Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ñ— Ğ³Ñ€Ğ°Ğ²Ñ†Ñ Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ñ–Ğ²Ğ½Ñ ğŸ”¸ğŸ”¸ğŸ”¸
player_start_positions = [
    (100, 330),   # Ğ Ñ–Ğ²ĞµĞ½ÑŒ 1
    (400, 330),   # Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2
    (700, 330),   # Ğ Ñ–Ğ²ĞµĞ½ÑŒ 3
]

# ğŸ”¸ğŸ”¸ğŸ”¸ ĞĞĞ’Ğ•: ĞŸĞ¾Ğ·Ğ¸Ñ†Ñ–Ñ— Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ğ»Ñƒ Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ñ–Ğ²Ğ½Ñ ğŸ”¸ğŸ”¸ğŸ”¸
portal_positions = [
    (1100, 400),  # Ğ Ñ–Ğ²ĞµĞ½ÑŒ 1
    (1100, 400),  # Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2
    (1100, 400),  # Ğ Ñ–Ğ²ĞµĞ½ÑŒ 3
]

clock = pygame.time.Clock()

class GameObject():
    def __init__(self, filename, x=0, y=0, width=10, height=10):
        self.image_right = pygame.image.load(filename)
        self.image_right = pygame.transform.scale(self.image_right, (width, height))
        self.image_left = pygame.transform.flip(self.image_right, True, False)
        self.image = self.image_right
        self.rect = self.image.get_rect()
        self.rect.x = x
        self.rect.y = y
        self.facing_right = True
        self.velocity_y = 0
        self.isJumping = False

    def draw(self):
        screen.blit(self.image, self.rect)

    def move(self, dx):
        self.rect.x += dx
        if dx > 0:
            self.image = self.image_right
            self.facing_right = True
        if dx < 0:
            self.image = self.image_left
            self.facing_right = False

    def apply_gravity(self):
        self.velocity_y += GRAVITY
        self.rect.y += self.velocity_y

        if self.rect.y >= GROUND_Y:
            self.rect.y = GROUND_Y
            self.velocity_y = 0
            self.isJumping = False

    def jump(self):
        if not self.isJumping:
            self.velocity_y = JUMP_POWER
            self.isJumping = True

GRAVITY = 1
JUMP_POWER = -20
GROUND_Y = 500

# Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ”Ğ¼Ğ¾ Ğ³Ñ€Ğ°Ğ²Ñ†Ñ Ñ– Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ğ»
player = GameObject("player.png", 0, 0, 300, 230)
portal = GameObject("portal.jpg", 0, 0, 80, 100)

# ğŸ”¸ğŸ”¸ğŸ”¸ ĞĞĞ’Ğ•: Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğ¸ Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºĞ¾Ğ²Ñƒ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ñ Ğ´Ğ»Ñ Ñ€Ñ–Ğ²Ğ½Ñ 0 ğŸ”¸ğŸ”¸ğŸ”¸
player.rect.x, player.rect.y = player_start_positions[current_level]
portal.rect.x, portal.rect.y = portal_positions[current_level]

player_forward = 0
start = True
while start:
    screen.blit(backgrounds[current_level], (0, 0))
    player.draw()
    portal.draw()

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            start = False

        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_d:
                player_forward = 5
            elif event.key == pygame.K_a:
                player_forward = -5
            elif event.key == pygame.K_SPACE:
                player.jump()

        elif event.type == pygame.KEYUP:
            if event.key in (pygame.K_d, pygame.K_a):
                player_forward = 0

    player.apply_gravity()
    player.move(player_forward)

    # ğŸ”¸ğŸ”¸ğŸ”¸ ĞĞĞ’Ğ•: ĞŸĞµÑ€ĞµÑ…Ñ–Ğ´ Ğ½Ğ° Ğ½Ğ°ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹ Ñ€Ñ–Ğ²ĞµĞ½ÑŒ Ğ· Ğ½Ğ¾Ğ²Ğ¸Ğ¼Ğ¸ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–ÑĞ¼Ğ¸ ğŸ”¸ğŸ”¸ğŸ”¸
    if player.rect.colliderect(portal.rect):
        if current_level < len(backgrounds) - 1:
            current_level += 1
            # ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ñ Ğ³Ñ€Ğ°Ğ²Ñ†Ñ Ñ– Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ğ»Ñƒ
            player.rect.x, player.rect.y = player_start_positions[current_level]
            portal.rect.x, portal.rect.y = portal_positions[current_level]
        else:
            print("Ğ’Ñ–Ñ‚Ğ°Ñ”Ğ¼Ğ¾! Ğ’Ğ¸ Ğ¿Ñ€Ğ¾Ğ¹ÑˆĞ»Ğ¸ Ğ²ÑÑ– Ñ€Ñ–Ğ²Ğ½Ñ–!")
            start = False

    pygame.display.flip()
    clock.tick(100)

pygame.quit()
